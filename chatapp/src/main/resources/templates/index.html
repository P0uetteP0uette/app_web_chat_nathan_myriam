<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chat App</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>

<div id="chat-page">
    
    <div id="sidebar">
        <h3>üë• Utilisateurs</h3>
        
        <div id="current-user">
            Moi : <b th:text="${username}">Invit√©</b>
            <select id="status-select" onchange="sendStatusChange()">
                <option value="ONLINE">En ligne</option>
                <option value="BUSY">Occup√©</option>
                <option value="AWAY">Absent</option>
            </select>
        </div>

        <ul id="users-list">
            </ul>
        
        <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid #ddd;">
            
            <a href="/find-friends" style="display: block; width: 100%; background: #3498db; color: white; padding: 10px; border-radius: 5px; text-decoration: none; text-align: center; font-weight: bold; margin-bottom: 10px; transition: background 0.3s;">
                <i class="bi bi-person-plus-fill"></i> Trouver des amis
            </a>

            <form th:action="@{/logout}" method="post">
                <button type="submit" style="width: 100%; background: #e74c3c; padding: 10px; border:none; color:white; border-radius:5px; cursor:pointer; font-weight: bold;">
                    D√©connexion
                </button>
            </form>
        </div>
    </div>

    <div id="chat-container">
        
        <div id="chat-header-container">
            <h2 id="chat-header">Chat G√©n√©ral</h2>
        </div>

        <div id="chat-box">
            </div>

        <div id="message-input-area">
            <div class="input-wrapper">
                <input type="text" id="message" placeholder="Envoyer un message..." autocomplete="off" />
                <button id="send-btn" onclick="sendMessage()">‚û§</button>
            </div>
        </div>

    </div>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    var currentUserGlobal = /*[[${username}]]*/ 'Invit√©';
    console.log("‚úÖ Variable globale charg√©e : " + currentUserGlobal);
    /*]]>*/
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="/js/chat.js?v=3"></script>

</body>
</html>

</body>
</html>